# Admin Guide: Managing Calibration Factors

## Table of Contents
1. [Overview](#overview)
2. [Accessing the Calibration Admin Interface](#accessing-the-calibration-admin-interface)
3. [Understanding the Interface](#understanding-the-interface)
4. [Adjusting Calibration Factors](#adjusting-calibration-factors)
5. [Activating and Deactivating Calibration](#activating-and-deactivating-calibration)
6. [Resetting to Default Values](#resetting-to-default-values)
7. [Managing Multiple Weeks](#managing-multiple-weeks)
8. [Best Practices](#best-practices)
9. [Common Scenarios](#common-scenarios)
10. [Troubleshooting](#troubleshooting)

---

## Overview

As an administrator, you have the ability to configure and manage projection calibration factors for each NFL position on a per-week basis. This guide provides step-by-step instructions for managing calibration through the admin interface.

### What You Can Do

- View current calibration factors for any week
- Adjust calibration percentages for each position (QB, RB, WR, TE, K, DST)
- Activate or deactivate calibration for specific weeks
- Reset calibration to default values
- Preview how adjustments will affect sample projections

### Prerequisites

- Administrator role in the DFS optimizer application
- Understanding of projection calibration concepts (see User Guide 11.3)
- Knowledge of your league's specific projection accuracy patterns (optional)

---

## Accessing the Calibration Admin Interface

### Method 1: Via Calibration Status Chip

1. Navigate to the **Player Pool** screen
2. Locate the **calibration status chip** in the top-right corner
3. Click the chip (shows "Projection Calibration: Active" or "Not Active")
4. Calibration admin modal opens

[SCREENSHOT DESCRIPTION: Player Pool screen header with green calibration status chip highlighted, cursor hovering over it]

### Method 2: Via Settings Menu

1. Click the **Settings** icon in the main navigation
2. Select **Admin** section
3. Click **Projection Calibration** menu item
4. Calibration admin interface opens

[SCREENSHOT DESCRIPTION: Settings dropdown menu expanded, showing "Admin" section with "Projection Calibration" option highlighted]

### Method 3: Direct URL

Navigate directly to: `/admin/calibration` (if your application supports direct routing)

---

## Understanding the Interface

### Interface Layout

The calibration admin interface consists of five main sections:

[SCREENSHOT DESCRIPTION: Full calibration admin modal showing all five sections arranged vertically]

#### 1. Week Selector
**Location:** Top of modal

**Purpose:** Select which week's calibration to view/edit

**Controls:**
- Dropdown menu listing all available weeks
- Shows current selected week (e.g., "Week 8 - 2025")
- Auto-selects current week on first open

[SCREENSHOT DESCRIPTION: Week selector dropdown at top of modal, showing "Week 8 - 2025" selected]

#### 2. Active/Inactive Toggle
**Location:** Below week selector

**Purpose:** Enable or disable calibration for the selected week

**States:**
- **ON (Green toggle):** Calibration active - imports will apply calibration
- **OFF (Gray toggle):** Calibration inactive - imports use original values

[SCREENSHOT DESCRIPTION: Toggle switch in ON position (green) with label "Calibration Active for Week 8"]

#### 3. Position Tabs
**Location:** Middle section

**Purpose:** Switch between positions to view/edit specific calibration factors

**Tabs:**
- QB | RB | WR | TE | K | DST
- Active tab highlighted with underline/background color
- Click any tab to switch positions

[SCREENSHOT DESCRIPTION: Six horizontal tabs for positions, with "RB" tab highlighted/active]

#### 4. Adjustment Input Fields
**Location:** Main content area (changes based on selected position)

**Purpose:** Edit calibration factors for the selected position

**Fields:**
- **Floor Adjustment %:** Percentage adjustment for floor projection
- **Median Adjustment %:** Percentage adjustment for median projection
- **Ceiling Adjustment %:** Percentage adjustment for ceiling projection

**Input Details:**
- Number input fields
- Range: -50.0 to +50.0
- Supports decimals (e.g., 8.5)
- Red border indicates invalid value

[SCREENSHOT DESCRIPTION: Three input fields vertically stacked, labeled "Floor Adjustment %", "Median Adjustment %", "Ceiling Adjustment %", with values 10.0, 8.0, -10.0 respectively]

#### 5. Preview Section
**Location:** Right side panel (or below inputs on mobile)

**Purpose:** Shows real-time preview of calibration calculation

**Display:**
- Sample original value (e.g., 12.0)
- Adjustment percentage being applied
- Formula shown: "Original × (1 + adjustment% / 100)"
- Calculated calibrated value
- Updates live as you type

**Example Preview:**
```
Floor Preview:
Original: 10.0
Adjustment: +10%
Formula: 10.0 × 1.10
Calibrated: 11.0
```

[SCREENSHOT DESCRIPTION: Preview panel showing calculation breakdown with sample values and formula]

#### 6. Action Buttons
**Location:** Bottom of modal

**Buttons:**
- **Save Changes (Blue button):** Commits all changes to database
- **Cancel (Gray button):** Closes modal without saving
- **Reset to Defaults (Red outline button):** Resets all positions to default values

[SCREENSHOT DESCRIPTION: Three buttons arranged horizontally at bottom - blue "Save Changes", gray "Cancel", red outline "Reset to Defaults"]

---

## Adjusting Calibration Factors

### Step-by-Step: Editing a Single Position

#### Step 1: Select Week
1. Open calibration admin interface
2. Click **week selector** dropdown
3. Choose the week you want to configure
4. Interface loads current calibration for that week

#### Step 2: Select Position
1. Click the **position tab** you want to adjust (e.g., "RB")
2. Current calibration factors load in input fields
3. Preview section shows sample calculation

[SCREENSHOT DESCRIPTION: RB tab selected, showing filled input fields with current values]

#### Step 3: Adjust Floor Percentage
1. Click in the **Floor Adjustment %** field
2. Enter new value (e.g., change 10.0 to 12.0)
3. Preview updates instantly showing new calculation
4. Valid range: -50.0 to +50.0

**Example:**
```
Before: 10.0%
After:  12.0%
Preview: 10.0 × 1.12 = 11.2
```

#### Step 4: Adjust Median Percentage
1. Click in the **Median Adjustment %** field
2. Enter new value (e.g., change 8.0 to 10.0)
3. Preview updates for median calculation
4. Valid range: -50.0 to +50.0

#### Step 5: Adjust Ceiling Percentage
1. Click in the **Ceiling Adjustment %** field
2. Enter new value (e.g., change -10.0 to -8.0)
3. Preview updates for ceiling calculation
4. Valid range: -50.0 to +50.0

#### Step 6: Review Preview
Check the preview section to ensure calculations look correct:

```
Floor Preview:
  Original: 10.0 → Calibrated: 11.2 (+1.2)

Median Preview:
  Original: 18.0 → Calibrated: 19.8 (+1.8)

Ceiling Preview:
  Original: 30.0 → Calibrated: 27.6 (-2.4)
```

#### Step 7: Save Changes
1. Click **Save Changes** button
2. Loading indicator appears
3. Success message: "Calibration updated for RB"
4. Modal remains open (can edit another position)

[SCREENSHOT DESCRIPTION: Success toast notification in top-right: "Calibration updated for RB ✓"]

### Batch Editing: Multiple Positions

To edit multiple positions at once:

1. Select week
2. Click **QB tab**, enter QB adjustments
3. Click **RB tab**, enter RB adjustments
4. Click **WR tab**, enter WR adjustments
5. Continue for all positions you want to modify
6. Click **Save Changes** once
7. All positions update in a single batch operation

**Note:** Save happens for all modified positions, not just the currently selected tab.

---

## Activating and Deactivating Calibration

### Activating Calibration

**When to activate:**
- You want imports to use calibrated projections
- Calibration factors are configured correctly
- Current/future weeks where calibration should apply

**How to activate:**

1. Open calibration admin interface
2. Select the week
3. Toggle switch to **ON** (green)
4. Click **Save Changes**
5. Calibration status chip on Player Pool screen turns green

[SCREENSHOT DESCRIPTION: Toggle switch animation showing transition from OFF (gray) to ON (green)]

**What happens:**
- Next import for this week applies calibration
- Calibration status chip shows "Active"
- Player pools receive calibrated projections

### Deactivating Calibration

**When to deactivate:**
- You want to temporarily disable calibration without deleting settings
- Testing import without calibration
- Historical week where calibration shouldn't apply

**How to deactivate:**

1. Open calibration admin interface
2. Select the week
3. Toggle switch to **OFF** (gray)
4. Click **Save Changes**
5. Calibration status chip on Player Pool screen turns gray

**What happens:**
- Next import for this week skips calibration
- Original projections used directly
- Calibration factors remain saved (can reactivate later)
- Calibration status chip shows "Not Active"

### Important Notes

**Re-Import Required:**
- Changing active status does NOT retroactively affect already-imported players
- To apply the change, you must **re-import** player data for that week
- Example workflow:
  1. Deactivate calibration
  2. Re-import DraftKings file
  3. Players now have original (non-calibrated) projections

**Status Persistence:**
- Active/inactive status is per-week
- Activating Week 8 doesn't affect Week 9
- Each week has independent calibration configuration

---

## Resetting to Default Values

### When to Reset

- Calibration factors were misconfigured
- You want to start fresh with research-based defaults
- Projection source changed (e.g., switched from ETR to another provider)
- Testing baseline performance before custom adjustments

### How to Reset

#### Step 1: Open Calibration Admin
1. Navigate to calibration admin interface
2. Select the week you want to reset

#### Step 2: Click Reset Button
1. Locate **Reset to Defaults** button (red outline, bottom of modal)
2. Click the button
3. Confirmation dialog appears

[SCREENSHOT DESCRIPTION: Confirmation dialog overlay: "Reset calibration to defaults for Week 8? This will delete your custom settings and restore research-based default values." with "Cancel" and "Reset" buttons]

#### Step 3: Confirm Reset
1. Read confirmation message carefully
2. Click **Reset** to proceed (or **Cancel** to abort)
3. Loading indicator appears

#### Step 4: Verify Reset
1. Success message: "Calibration reset to defaults for Week 8"
2. All position tabs now show default values
3. Active toggle remains in its current state (doesn't auto-activate)

### Default Values Reference

After reset, all positions will have these values:

| Position | Floor | Median | Ceiling | Rationale |
|----------|-------|--------|---------|-----------|
| QB | +5.0% | 0.0% | -5.0% | Compress range slightly |
| RB | +10.0% | +8.0% | -10.0% | Median too low, range too wide |
| WR | +8.0% | +5.0% | -12.0% | Median skewed low, ceiling too high |
| TE | +10.0% | +7.0% | -10.0% | Similar to RB |
| K | 0.0% | 0.0% | 0.0% | Already accurate |
| DST | 0.0% | 0.0% | 0.0% | Already accurate |

### After Reset

**What you need to do:**
1. **Review the defaults** - Click through position tabs to see restored values
2. **Activate calibration** (if it was inactive) - Toggle to ON if desired
3. **Re-import data** - Import player data again for calibration to apply
4. **Save changes** - Click Save to commit the reset

**What gets preserved:**
- Week configuration (week record not deleted)
- Active/inactive status (doesn't change)
- Historical data (past imports unaffected)

**What gets deleted:**
- Any custom calibration factors you previously entered
- Only affects the selected week (other weeks unchanged)

---

## Managing Multiple Weeks

### Copying Calibration to Other Weeks

**Scenario:** You've configured Week 8 calibration and want to use the same settings for Weeks 9-18.

**Current limitation:** The interface doesn't have a built-in "copy to other weeks" feature yet.

**Workaround:** Manual configuration
1. Note down Week 8 calibration factors (all 6 positions)
2. For each week (9-18):
   - Select week
   - Enter same calibration factors
   - Activate if desired
   - Save changes

**Future enhancement:** Batch week management is planned for a future release.

### Viewing Calibration Across Weeks

**To compare calibration across multiple weeks:**

1. Open calibration admin
2. Select Week 8, note factors
3. Select Week 9, note factors
4. Compare manually

**Tip:** Take screenshots or export to spreadsheet for easier comparison.

### Managing Historical Weeks

**Historical weeks (already completed):**
- Can still configure calibration
- Useful for testing "what if" scenarios
- Changes don't affect historical imported data (unless you re-import)
- Helps analyze what calibration factors would have worked best

**Example use case:**
1. Configure calibration for Week 3 (historical)
2. Re-import Week 3 DraftKings data
3. Compare lineup quality with calibration vs without
4. Use insights to tune current week factors

---

## Best Practices

### 1. Start with Defaults

**Recommendation:** Always start with default values when configuring a new week.

**Why:**
- Defaults are based on extensive historical analysis
- Proven to improve lineup quality 5-10%
- Conservative adjustments (unlikely to harm results)

**When to deviate:**
- You have league-specific data showing different patterns
- Projection source changed (e.g., new provider)
- Multiple weeks of testing show consistent over/under performance

### 2. Make Small Adjustments

**Recommendation:** When customizing, change factors by 1-3% at a time.

**Why:**
- Large changes (>10%) can produce unrealistic projections
- Small incremental adjustments are easier to test
- Reduces risk of over-correcting

**Example:**
```
Default RB Median: +8.0%
Testing: +9.0% (small tweak)
Avoid: +15.0% (too aggressive)
```

### 3. Test Before Committing

**Recommendation:** Test calibration on a single week before applying to entire season.

**Testing workflow:**
1. Configure calibration for current week
2. Import player data
3. Generate 10-20 test lineups
4. Track actual scores vs projected
5. Adjust calibration if needed
6. Roll out to future weeks once confident

### 4. Document Your Changes

**Recommendation:** Keep a log of calibration adjustments and why you made them.

**Example log:**
```
Week 8 (2025-11-01):
- Changed RB Median from +8% to +10%
- Reason: RBs underperforming by avg 2 points/game weeks 1-7
- Expected impact: +0.5 pts/RB median projection

Week 9 (2025-11-08):
- Reset to defaults
- Reason: Week 8 adjustment overcorrected
```

### 5. Review Calibration Weekly

**Recommendation:** Check calibration settings at the start of each week.

**Weekly checklist:**
- [ ] Verify calibration active for current week
- [ ] Review any projection accuracy issues from previous week
- [ ] Make minor adjustments if consistent patterns emerge
- [ ] Test on sample data before finalizing

### 6. Use Preview Section

**Recommendation:** Always check the preview before saving.

**What to verify:**
- Calculations produce reasonable results
- No extreme outliers (e.g., floor > ceiling)
- Adjustments align with your intentions
- Formula math is correct

**Red flags in preview:**
```
Bad: Floor: 8.0 → 2.0 (floor collapsed)
Bad: Ceiling: 25.0 → 40.0 (ceiling inflated)
Bad: Floor: 15.0, Ceiling: 12.0 (floor > ceiling)
```

### 7. Activate Calibration Early

**Recommendation:** Activate calibration for future weeks in advance.

**Best timing:**
- Configure next week's calibration on Tuesday/Wednesday
- Activate before Thursday imports
- Gives time to test and adjust if needed

**Avoid:**
- Activating calibration Saturday evening before DFS contests
- Last-minute changes without testing
- Rushing calibration configuration during import

### 8. Coordinate with Data Imports

**Recommendation:** Calibration configuration should happen BEFORE importing player data.

**Ideal workflow:**
1. Tuesday: Configure calibration for upcoming week
2. Wednesday: Activate calibration, test with sample import
3. Thursday: Import DraftKings data (calibration applies)
4. Friday/Saturday: Generate lineups with calibrated data

**Avoid:**
1. Thursday: Import data (no calibration)
2. Friday: Configure calibration
3. Result: Need to re-import (wasted time)

### 9. Don't Over-Optimize

**Recommendation:** Resist the temptation to adjust calibration every week.

**Why:**
- Week-to-week variance is normal
- Calibration benefits compound over many weeks
- Frequent changes prevent you from evaluating effectiveness
- Over-fitting to small samples reduces long-term accuracy

**Good cadence:**
- Review calibration: Weekly
- Make adjustments: Every 4-6 weeks (if data supports)
- Major overhaul: Once per season (season start)

### 10. Communicate with Users

**Recommendation:** Inform users when calibration status changes.

**What to communicate:**
- When calibration is activated for the first time
- If calibration factors are significantly adjusted
- If calibration is temporarily deactivated
- Why changes were made (builds trust)

**Example message:**
```
"Calibration has been activated for Week 8. Player imports will now
include position-based adjustments to improve projection accuracy.
Check the User Guide for more information."
```

---

## Common Scenarios

### Scenario 1: First-Time Setup (New Season)

**Goal:** Configure calibration for Week 1 of new season

**Steps:**
1. Open calibration admin interface
2. Select Week 1
3. Click **Reset to Defaults** (ensures clean slate)
4. Review all position tabs - verify defaults are loaded
5. Toggle calibration to **ON**
6. Click **Save Changes**
7. Test with sample import
8. Communicate to users that calibration is active

**Result:** Week 1 ready with research-based default calibration.

---

### Scenario 2: Position Underperforming

**Goal:** Adjust RB calibration because RBs are consistently scoring 2 points below projections

**Steps:**
1. Analyze: Calculate average underperformance (e.g., -2.0 pts/game)
2. Calculate adjustment: -2.0 pts on average 18.0 projection = ~11% underperformance
3. Open calibration admin for current week
4. Select **RB tab**
5. Increase **Median Adjustment** from +8.0% to +11.0% (+3% increase)
6. Check preview - verify calculation makes sense
7. Consider slight floor adjustment too (+10% to +12%)
8. Save changes
9. Document adjustment in log

**Result:** RB medians now 3% higher, hopefully closing the 2-point gap.

**Follow-up:** Track next 2-3 weeks to see if adjustment was correct.

---

### Scenario 3: Deactivating for Playoff Week

**Goal:** Disable calibration for playoff week due to small sample size concerns

**Steps:**
1. Open calibration admin
2. Select playoff week (e.g., Week 18)
3. Toggle calibration to **OFF**
4. Click **Save Changes**
5. Verify calibration status chip shows "Not Active"
6. Communicate to users: "Calibration deactivated for playoffs - using raw projections"
7. Import playoff week data (original projections used)

**Result:** Playoff week uses uncalibrated projections as intended.

**Note:** Calibration factors remain saved; can reactivate next season.

---

### Scenario 4: Testing Custom Factors

**Goal:** Test whether more aggressive RB adjustments improve results

**Steps:**
1. Select a test week (e.g., Week 10)
2. Configure aggressive calibration:
   - RB Floor: +15% (vs default +10%)
   - RB Median: +12% (vs default +8%)
   - RB Ceiling: -15% (vs default -10%)
3. Activate calibration
4. Import data for Week 10
5. Generate 20 test lineups
6. Track actual scores throughout the week
7. Compare to:
   - Default calibration performance
   - Non-calibrated performance
8. Analyze results:
   - Did lineups score higher?
   - Were projections more accurate?
   - Any negative side effects?

**Result:** Data-driven decision on whether to adopt aggressive adjustments.

---

### Scenario 5: Correcting Misconfiguration

**Goal:** You accidentally set WR ceiling to +12% instead of -12%

**Steps:**
1. Open calibration admin immediately
2. Select the affected week
3. Click **WR tab**
4. See incorrect value: Ceiling +12.0%
5. Correct to: Ceiling -12.0%
6. Save changes
7. **Critical:** Re-import player data for that week
8. Verify players now have correct calibrated ceilings

**Result:** Misconfiguration corrected; need to re-import for fix to apply.

**Lesson:** Always double-check signs (+/-) when entering adjustments.

---

## Troubleshooting

### Issue: "Save Changes" Button is Disabled

**Symptoms:**
- Can't click Save Changes button
- Button appears grayed out

**Causes:**
1. **Validation error** - One or more input values are invalid
2. **No changes made** - All values unchanged from initial state
3. **Loading state** - Previous save still in progress

**Solutions:**
1. Check all input fields for red borders (validation errors)
2. Ensure at least one value has changed
3. Wait for previous operation to complete
4. Verify values are within -50.0 to +50.0 range

---

### Issue: Changes Not Applying to Imports

**Symptoms:**
- Saved calibration changes
- Imported player data
- Players still have old calibrated values (or no calibration)

**Causes:**
1. **Calibration inactive** - Toggle is OFF for that week
2. **Wrong week selected** - Configured Week 8, but importing Week 9
3. **Changes not saved** - Clicked Cancel instead of Save
4. **Cache issue** - Browser cached old calibration data

**Solutions:**
1. Verify calibration toggle is ON for the week
2. Confirm week selector matches import week
3. Open admin interface - verify values are as expected
4. Try re-importing data
5. Clear browser cache and retry
6. Check calibration status chip - should show "Active"

---

### Issue: Preview Shows Unexpected Results

**Symptoms:**
- Preview calculation doesn't match expected result
- Formula seems wrong

**Causes:**
1. **Misunderstanding formula** - Formula is multiplicative, not additive
2. **Rounding differences** - Preview may round differently
3. **Wrong sample value** - Preview uses fixed sample, not actual player data

**Example confusion:**
```
Expected: 10.0 + 10% = 11.0 ✓ Correct
Thought:  10.0 + 10.0 = 20.0 ✗ Wrong understanding

Actual formula: 10.0 × 1.10 = 11.0
```

**Solutions:**
1. Verify you understand the formula: `Original × (1 + adjustment% / 100)`
2. Test with simple values (e.g., 10% of 10.0 = 1.0 increase → 11.0)
3. Remember: 10% adjustment means 10% of the original value, not 10 points

---

### Issue: Reset to Defaults Not Working

**Symptoms:**
- Clicked Reset to Defaults
- Values didn't change

**Causes:**
1. **Already at defaults** - Current values happen to match defaults
2. **Didn't click Confirm** - Cancelled the confirmation dialog
3. **Browser error** - JavaScript error prevented operation

**Solutions:**
1. Check if current values match default values table (see Reset section)
2. Try reset again - ensure you click "Reset" in confirmation dialog
3. Check browser console for errors (F12 → Console tab)
4. Refresh page and retry
5. Contact support if issue persists

---

### Issue: Can't Access Calibration Admin

**Symptoms:**
- Calibration status chip click does nothing
- No "Projection Calibration" option in Settings menu

**Causes:**
1. **Insufficient permissions** - User role is not Administrator
2. **Feature flag disabled** - Calibration feature not enabled for environment
3. **JavaScript error** - UI component failed to load

**Solutions:**
1. Verify your user role is Administrator (check user profile)
2. Contact system administrator to grant admin permissions
3. Check if other admin features are accessible (if not, role issue)
4. Try different browser or clear cache
5. Check browser console for errors

---

### Issue: Validation Error on Valid Value

**Symptoms:**
- Entered valid value (e.g., 8.0)
- Field shows red border
- Error: "Value must be between -50 and 50"

**Causes:**
1. **Decimal format issue** - Some locales use comma (8,0) instead of period (8.0)
2. **Extra characters** - Spaces or % symbol included (e.g., "8.0%")
3. **Out of range** - Value actually outside -50 to +50 (e.g., typo: 80 instead of 8)

**Solutions:**
1. Use period for decimal: 8.0 (not 8,0)
2. Enter number only: 8.0 (not "8.0%" or "8.0 percent")
3. Double-check value is within -50.0 to +50.0
4. Try entering simpler value (e.g., 8 instead of 8.5) to test
5. Copy/paste from default values table if issue persists

---

### Issue: Batch Save Failed

**Symptoms:**
- Edited multiple positions
- Clicked Save
- Error: "Failed to batch update calibrations"
- None of the changes saved

**Causes:**
1. **Database connection error** - Temporary network/database issue
2. **Validation failure** - One position had invalid data
3. **Transaction timeout** - Operation took too long

**Solutions:**
1. Check error message for details (may indicate which position failed)
2. Verify all positions have valid values
3. Retry save operation
4. If persistent, save positions one at a time:
   - Save QB
   - Save RB
   - etc.
5. Contact support if database errors persist

---

## Summary

As an administrator, you have powerful tools to fine-tune projection calibration:

**Key Actions:**
- ✓ Adjust calibration factors per position
- ✓ Activate/deactivate calibration per week
- ✓ Reset to research-based defaults anytime
- ✓ Preview calculations before saving
- ✓ Manage multiple weeks independently

**Best Practices:**
- Start with defaults (well-researched)
- Make small adjustments (1-3% at a time)
- Test before rolling out broadly
- Document your changes
- Review weekly, adjust monthly
- Communicate changes to users

**Remember:**
- Calibration requires re-import to apply to existing data
- Changes are per-week (Week 8 doesn't affect Week 9)
- Preview helps catch errors before saving
- Default values are proven to work well

Use calibration thoughtfully to improve projection accuracy and lineup quality for all users!
